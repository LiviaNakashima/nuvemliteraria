<html>

<head>
    <link rel="stylesheet" href="css/Design.css" type="text/css">
    <meta charset="utf-8">
    <title>Livros Cadastrados</title>
    <link rel="shortcut icon" href="images/favicon.png">
</head>

<body>

    <div class="logo">
        <img src="images/favicon.png" height="54px" width="56px"><a href="Index.html">Nuvem Literária</a><img
            src="images/favicon.png" height="54px" width="56px">
    </div>

    <div class="menu">
        <div class="menuitem"><a class="menulink" href="Index.html">Início</a></div>
        <div class="menuitem"><a class="menulink" href="Resenhas.html">Resenhas</a></div>
        <div class="menuitem"><a class="menulink" href="Livros Cadastrados.html">Livros Cadastrados</a></div>
        <div class="menuitem" ><a class="menulink" href="Lista de Desejos.html">Lista de Desejos</a></div>
        <div class="menuitem" id="cad" style="display: none"><a class="menulink" href="Cadastro.html">Cadastro</a></div>
        <div class="menuitem" id="ent" style="display: none"><a class="menulink" href="Entrar.html">Entrar</a></div>
        <div class="menuitem" id="ss" style="display: none"><a class="menulink" onclick="sair()">Sair</a></div>
    </div>

    </div>
    <div class="titulo">
        Livros já cadastrados!
    </div>

    <div class="conteinerprodutos" id="resultados" style="display:none"></div>

    <script src="js/geral.js"></script>

    <div class="container" id="gif" style="display: none">
        <div id="clouds">
          <div class="cloud1"></div>
          <div class="cloud2"></div>
          <div class="cloud3"></div>
        </div>
        <div id="clouds2">
          <div class="cloud1"></div>
          <div class="cloud2"></div>
          <div class="cloud3"></div>
        </div>
      
      </div>

      <div class="main" id="main" style="display: none"> 
        <div class="cloud_base">
            <span class="rounds" style="text-align: center">
                    <a class="menulink2" href="Entrar.html"><b>ENTRE PARA VER A LISTA DE CADASTRADOS</b></a>
            </span>
        </div>
    </div>
    </body>
    <script>
    fetch('/leituras/ultimas', { cache: 'no-store' }).then(function (response) {
            if (response.ok) {
                response.json().then(function (resposta) {

                    console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);

                   for(i=0; i<resposta.length; i++)
                   {
                     console.log(resposta[i]);
                     resultados.innerHTML += `<div class="hvr-grow"> 
        <div class="caixaproduto">
            <a href="Ramses.html"><img src="${resposta[i].link}" height="200px" width="220px"></a>
        <div class="nome">${resposta[i].livro}
        </div> 
    </div>
                                                </div>`;
                   }


                   
                });
            } else {
                console.error('Nenhum dado encontrado ou erro na API');
            }
        })
            .catch(function (error) {
                console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
            });

            if (sessionStorage.usuario_bandtec != undefined) {
        resultado.style.display = 'flex';
        gif.style.display = 'flex';
    }

    else {
        main.style.display = 'flex';
    }
    
    </script>